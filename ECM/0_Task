Постановка задачи и ее решение
https://babok-school.ru/blog/uml-diagrams-to-design-sed-example/
https://babok-school.ru/blog/uml-diagrams-to-implement-code-on-python-sed-example/

Рассмотрим только самые базовые возможности типовой СЭД: создание документа и его согласование. Создать документ может любой пользователь.
Документ может включать в себя файл в формате pdf, doc, ppt, xls. Чтобы документ был доступен для просмотра другим пользователям, автор документа, создавший его локально, должен его опубликовать. 
Далее инициатор процесса согласования отправляет его по маршруту согласования (workflow). 
Маршрут согласования состоит из задач, каждая из которых имеет исполнителя, а также плановые и фактические сроки выполнения.
Исполнитель задачи согласования, т.е пользователь, выполняющий поставленную задачу, может согласовать документ или отказать в согласовании.
Работа с документом в СЭД предполагает изменение его состояния. 
В СЭД жизненный цикл документа включает создание, публикацию, возможное согласование или отклонение, и завершение. 
Каждый переход между состояниями осуществляется через вызов соответствующей функции. После создания документ находится в состоянии новый (new), когда он только что создан и еще не опубликован. 
После публикации документ переходит в состояние опубликован (published)  и становится доступен для просмотра и дальнейшего согласования. 
Будучи отправленным по маршруту согласования, документ переходит в состояние на согласовании (on_review). 
Если документ прошел согласование и одобрен, он переходит в состояние согласован (approved). 
Иначе, когда документ не прошел согласование и был отклонен, он переходит в состояние несогласован (rejected). 
Документ завершает свой жизненный цикл, когда он либо согласован, либо несогласован. 

Жизненный цикл маршрута согласования документа начинается с создания нового маршрута, затем он может быть начат, выполняться, завершиться или быть отменен. 
Когда создается новый маршрут, он находится в состоянии новый (new). 
Когда маршрут запущен, он переходит в состояние начат (started), а потом выполняется (in_progress), когда выполняются его задачи. 
Когда все задачи маршрута выполнены, он успешно завершен (completed) и это его конечное состояние. 
Если маршрут отменен в процессе выполнения, он считается отмененным (canceled), что тоже является конечным состоянием. 

Для задачи (класс task) жизненный цикл выглядит так: после создания задача находится в состоянии новая (new). 
Когда она назначена на исполнителя, задача переходит в состояние назначенная (assigned). 
После того, как исполнитель начал работу над ней, задача становится начатой (started). 
Если исполнитель отказался выполнять задачу, она будет отклонена исполнителем (declined_by_executor). 
Если инициатор решил отменить задачу, она будет отменена инициатором (canceled_by_initiator). 
Пока исполнитель активно работает над задачей, она выполняется (performing). 
Если исполнитель задачи согласования согласовал документ, задача переходит в статус согласована исполнителем (completed_by_executor). 
Если исполнитель задачи согласования не согласовал документ, выполняемая задача переходит в статус несогласована исполнителем (rejected_by_executor). 
Выполняемая временно приостановленная задача переходит в статус заморожена (frozen), откуда ее выполнение может быть возобновлено или отменено (canceled), если инициатор отменил задачу или маршрут. 
Когда инициатор маршрута, в рамках которого исполнителю была поставлена задача, принял результаты ее выполнения (согласована или не согласована), она становится принятой (accepted_by_initiator). 
После принятия инициатором задача становится завершенной (finished) и это ее конечное состояние. UML-диаграмма состояний для класса task будет выглядеть так.


Инициатор создает и управляет задачами внутри маршрута согласования документа, при этом документ проходит этапы публикации, ревизии и утверждения, а исполнитель взаимодействует с задачами и документом в процессе согласования. Инициатор создаёт документ и отправляет его по новому маршруту согласования, а также добавляя задачи в маршрут. 
После добавления всех задач, по каждой из которых установлен исполнитель, инициатор запускает маршрут. При этом документ публикуется, если ранее он не был опубликован. 
После начала выполнения задачи статус документа становится на согласовании. 
Если исполнитель принял задачу и начал её выполнять, статус задачи меняется на выполняется, а также обновляется статус маршрута  — он тоже становится выполняемым. 
Если исполнитель не согласовал документ, меняется статус задачи и всего документа, поскольку документ может быть согласованным только при согласовании всех лиц. 
Когда все задачи завершены, у каждой из них есть время завершения, маршрут тоже завершается. Если все задачи в маршруте согласованы, документ считается согласованным.
